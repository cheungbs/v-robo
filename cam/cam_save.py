import time
import cv2

params = [
  { # 00 544 x 288   (17:9 = 1.888...)
    'w': 544,
    'h': 288,
    'name': '00-544x288'
  },
  { # 01 320 x 176   (20:11 = 1.8181...)
    'w': 320,
    'h': 176,
    'name': '01-320x176'
  },
  { # 02 752 x 416   (47:26 = 1.80769231)
    'w': 752,
    'h': 416,
    'name': '02-752x416'
  },
  { # 03 1184 x 656  (74:41 = 1.80487805)
    'w': 1184,
    'h': 656,
    'name': '03-1184x656'
  },
  { # 04-0 432 x 240 (9:5 = 1.8)
    'w': 432,
    'h': 240,
    'name': '04-0-432x240'
  },
  { # 04-1 864 x 480 (9:5 = 1.8)
    'w': 864,
    'h': 480,
    'name': '04-1-864x480'
  },
  { # 05 800 x 448 (25:14 = 1.78571429)
    'w': 800,
    'h': 448,
    'name': '05-800x448'
  },
  { # 06-0 1280 x 720 (16:9 = 1.7777...)
    'w': 1280,
    'h': 720,
    'name': '06-0-1280x720'
  },
  { # 06-1 640 x 360 (16:9 = 1.7777...)
    'w': 640,
    'h': 360,
    'name': '06-1-640x360'
  },
  { # 06-2 1024 x 576 (16:9 = 1.7777...)
    'w': 1024,
    'h': 576,
    'name': '06-2-1024x576'
  },
  { # 07 960 x 544 (30:17 = 1.76470588)
    'w': 960,
    'h': 544,
    'name': '07-960x544'
  },
  { # 08-0 640 x 480 (4:3 = 1.333...)
    'w': 640,
    'h': 480,
    'name': '08-0-640x480'
  },
  { # 08-1 320 x 240 (4:3 = 1.333...)
    'w': 320,
    'h': 240,
    'name': '08-1-320x240'
  },
  { # 08-2 160 x 120 (4:3 = 1.333...)
    'w': 160,
    'h': 120,
    'name': '08-2-160x120'
  },
  { # 08-3 800 x 600 (4:3 = 1.333...)
    'w': 800,
    'h': 600,
    'name': '08-3-800x600'
  },
  { # 08-4 960 x 720 (4:3 = 1.333...)
    'w': 960,
    'h': 720,
    'name': '08-4-960x720'
  },
  { # 09 352 x 288 (11:9 = 1.222...)
    'w': 352,
    'h': 288,
    'name': '09-352x288'
  }
]

camera_port = 0
camera = cv2.VideoCapture(camera_port)

prefix = time.strftime("%Y%m%d-%H%M%S")

for i in range(len(params)):
  camera.set(cv2.CAP_PROP_FRAME_WIDTH, params[i]['w'])
  camera.set(cv2.CAP_PROP_FRAME_HEIGHT, params[i]['h'])


  time.sleep(0.1)

  return_value, image = camera.read()
  fname = './imgs/' + prefix + '-' + params[i]['name'] + '.png'
  cv2.imwrite(fname, image)

del(camera)
